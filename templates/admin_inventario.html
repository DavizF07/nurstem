<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario y Farmacia - Nurstem</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/inventory.css"> </head>
<body>

    <div class="main-layout">
        
        <aside class="sidebar">
            <div class="brand">
                <h2>Nurstem</h2>
            </div>
            <nav class="nav-menu">
                <a href="admin_dashboard.html" class="nav-link">Dashboard</a>
                <a href="admin_personal.html" class="nav-link">Personal</a>
                <a href="admin_pacientes.html" class="nav-link">Pacientes</a>
                <a href="admin_asignaciones.html" class="nav-link">Asignaciones</a>
                <a href="admin_inventario.html" class="nav-link active">Inventario</a>
                <a href="admin_capacitacion.html" class="nav-link">Capacitación</a>
                <a href="#" class="nav-link">Cerrar Sesión</a>
            </nav>
        </aside>

        <main class="content-area">
            
            <div class="module-container">
                
                <div class="inventory-header">
                    <div class="header-info">
                        <h1>Gestión de Insumos y Farmacia</h1>
                        <p>Control de stock, lotes y caducidades</p>
                    </div>
                    <div class="filter-tabs">
                        <button class="tab-btn active">Todos</button>
                        <button class="tab-btn">Medicamentos</button>
                        <button class="tab-btn">Material de Curación</button>
                        <button class="tab-btn tab-alert">Stock Crítico (5)</button>
                    </div>
                </div>

                <div class="toolbar">
                    <div class="toolbar-actions" style="width: 100%; justify-content: space-between;">
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" class="search-bar" placeholder="Buscar por nombre, sustancia o código...">
                            <select class="form-select" style="width: 150px;">
                                <option value="central">Almacén Central</option>
                                <option value="piso1">Isla Piso 1</option>
                                <option value="urgencias">Isla Urgencias</option>
                            </select>
                        </div>
                        
                        <button class="btn-primary" onclick="openProductModal()">
                            <span>+</span> Nuevo Producto
                        </button>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table-data table-inventory">
                        <thead>
                            <tr>
                                <th>Código / Lote</th>
                                <th>Producto</th>
                                <th>Presentación</th>
                                <th>Caducidad</th>
                                <th>Ubicación</th>
                                <th class="text-center">Stock</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <span class="code-text">MED-001</span>
                                    <div class="batch-text">Lote: A4509</div>
                                </td>
                                <td>
                                    <div class="product-name">Paracetamol</div>
                                    <div class="product-sub">Analgésico / Antipirético</div>
                                </td>
                                <td>Tabs 500mg (Caja 20)</td>
                                <td>Dic 2026</td>
                                <td>Farmacia Central</td>
                                <td class="text-center">
                                    <span class="stock-badge stock-healthy">120</span>
                                </td>
                                <td>
                                    <button class="btn-icon" title="Ajustar Stock" onclick="openStockModal('Paracetamol 500mg', 120)">⇄</button>
                                    <button class="btn-icon" title="Editar">✎</button>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <span class="code-text">MAT-089</span>
                                    <div class="batch-text">Lote: N/A</div>
                                </td>
                                <td>
                                    <div class="product-name">Gasas Estériles</div>
                                    <div class="product-sub">Material de Curación</div>
                                </td>
                                <td>Paquete 10x10</td>
                                <td>Ago 2027</td>
                                <td>Isla Urgencias</td>
                                <td class="text-center">
                                    <span class="stock-badge stock-low">15</span>
                                </td>
                                <td>
                                    <button class="btn-icon" title="Ajustar Stock" onclick="openStockModal('Gasas Estériles', 15)">⇄</button>
                                    <button class="btn-icon" title="Editar">✎</button>
                                </td>
                            </tr>

                            <tr class="row-alert">
                                <td>
                                    <span class="code-text">MED-202</span>
                                    <div class="batch-text">Lote: B9901</div>
                                </td>
                                <td>
                                    <div class="product-name text-danger">Insulina Glargina</div>
                                    <div class="product-sub">Refrigerado</div>
                                </td>
                                <td>Frasco 10ml</td>
                                <td><span class="expiry-alert">FEB 2026</span></td>
                                <td>Farmacia Central</td>
                                <td class="text-center">
                                    <span class="stock-badge stock-critical">2</span>
                                </td>
                                <td>
                                    <button class="btn-icon" title="Ajustar Stock" onclick="openStockModal('Insulina Glargina', 2)">⇄</button>
                                    <button class="btn-icon" title="Editar">✎</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </main>
    </div>

    <div id="modalProduct" class="modal">
        <div class="modal-content modal-lg">
            <h2 class="modal-title">Registrar Nuevo Producto</h2>
            <form>
                <div class="form-row">
                    <div class="form-group col-half">
                        <label>Nombre Comercial</label>
                        <input type="text" class="form-input" placeholder="Ej. Aspirina Protect">
                    </div>
                    <div class="form-group col-half">
                        <label>Sustancia Activa / Genérico</label>
                        <input type="text" class="form-input" placeholder="Ej. Ácido Acetilsalicílico">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-third">
                        <label>Tipo</label>
                        <select class="form-select">
                            <option>Medicamento</option>
                            <option>Material Curación</option>
                            <option>Equipo Médico</option>
                        </select>
                    </div>
                    <div class="form-group col-third">
                        <label>Presentación</label>
                        <input type="text" class="form-input" placeholder="Ej. Caja 30 tabs">
                    </div>
                    <div class="form-group col-third">
                        <label>Concentración</label>
                        <input type="text" class="form-input" placeholder="Ej. 100mg">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-half">
                        <label>Stock Inicial</label>
                        <input type="number" class="form-input" placeholder="0">
                    </div>
                    <div class="form-group col-half">
                        <label>Punto de Reorden (Alerta)</label>
                        <input type="number" class="form-input" placeholder="Ej. 20">
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('modalProduct')">Cancelar</button>
                    <button type="submit" class="btn-primary">Guardar en Catálogo</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modalStock" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <h2 class="modal-title">Movimiento de Stock</h2>
            <div class="stock-adjustment-container">
                <p id="productNameTitle" style="color: var(--color-secondary); font-weight: 600; margin-bottom: 1rem;">Producto X</p>
                
                <div class="current-stock-display">
                    <span>Stock Actual:</span>
                    <strong id="currentStockDisplay">0</strong>
                </div>

                <div class="adjustment-controls">
                    <button class="btn-adjust type-minus" onclick="setMovement('salida')">- Salida</button>
                    <input type="number" class="input-adjust" value="1" min="1">
                    <button class="btn-adjust type-plus" onclick="setMovement('entrada')">+ Entrada</button>
                </div>

                <div class="form-group" style="margin-top: 1rem;">
                    <label>Motivo</label>
                    <select class="form-select">
                        <option>Reabastecimiento (Compra)</option>
                        <option>Salida a Piso / Consumo</option>
                        <option>Caducidad / Merma</option>
                        <option>Ajuste de Inventario</option>
                    </select>
                </div>
            </div>
            
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal('modalStock')">Cancelar</button>
                <button type="button" class="btn-primary">Confirmar Movimiento</button>
            </div>
        </div>
    </div>

    <script>
        // Lógica simple para manejo de múltiples modales
        function openProductModal() {
            document.getElementById('modalProduct').style.display = 'flex';
        }

        function openStockModal(name, stock) {
            document.getElementById('productNameTitle').innerText = name;
            document.getElementById('currentStockDisplay').innerText = stock;
            document.getElementById('modalStock').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Cerrar al click fuera
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>